<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
	<channel>
		<title>riccomini.name</title>
		<description>A blog about software engineering. Code examples, big data, data visualization, and more.</description>
		<link>http://riccomini.name</link>
		<atom:link href="http://riccomini.name/feed.xml" rel="self" type="application/rss+xml" />
		
			<item>
				<title>Tech Exits: What You Should Know</title>
				<description>&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;DISCLAIMER&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;I am not an expert in any of these areas. This is just a list of things that I&amp;#8217;ve heard, or discussed with people, over the years. This is not meant to substitute the advice of a financial advisor. This post does not reflect the view of my employer, or of anyone other than myself.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;FUNDING&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Most tech companies are funded through a combination of &lt;a href=&quot;http://en.wikipedia.org/wiki/Angel_investor&quot;&gt;angel investors&lt;/a&gt; and &lt;a href=&quot;http://en.wikipedia.org/wiki/Venture_capital&quot;&gt;venture capitalists&lt;/a&gt; using a combination of &lt;a href=&quot;http://techcrunch.com/2012/04/07/convertible-note-seed-financings/&quot;&gt;convertible notes&lt;/a&gt; (early) and &lt;a href=&quot;http://www.payne.org/index.php/Startup_Equity_For_Employees&quot;&gt;preferred equity&lt;/a&gt; (later). At the very beginning, the founders (usually a team of 1-4 people) use their network to get &lt;a href=&quot;http://bitly.com/bundles/royrod/2&quot;&gt;pitch meetings&lt;/a&gt; with potential investors.&lt;/p&gt;
&lt;p&gt;As an employee of a pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; startup, you&amp;#8217;re probably going to be &lt;a href=&quot;https://www.secondmarket.com/education/resource/what-startup-employees-should-know-about-their-equity-2&quot;&gt;compensated with a combination of salary (money) and stock&lt;/a&gt;. If you&amp;#8217;re early enough, you&amp;#8217;ll get &lt;a href=&quot;http://www.payne.org/index.php/Startup_Equity_For_Employees#Founder.27s_.2F_Restricted_Stock&quot;&gt;granted shares&lt;/a&gt;. If you&amp;#8217;re joining later on, typically post-series-A, you&amp;#8217;ll get options (the option to buy your shares at a given price). This distinction is rather nuanced; for more information, see the tax section, below. Typically these shares &amp;#8220;vest&amp;#8221; over a four year period with a one year cliff. This means that you have to wait 1 year before you get 25% of your options. Then, monthly, after that, you&amp;#8217;ll receive 1/48th of your total grant for the remaining three years.&lt;/p&gt;
&lt;p&gt;There are a number of things that you should consider if you go to work for a pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; startup. When the founders raise money, they&amp;#8217;re going to start hiring employees. The very first employee (employee #1) will typically be offered a chunk of shares that is equivalent to between 0.5% and 1% of the company&amp;#8217;s valuation. For example, if a startup raised its seed funding at a 10 million dollar valuation, the first employee could receive $100,000 worth of shares. These shares will be regular (not preferred).&lt;/p&gt;
&lt;p&gt;You&amp;#8217;ll notice that I did not say that the employee will receive X number of shares; I said, &amp;#8220;Some number of shares valued at X.&amp;#8221; This is an important distinction that has a huge psychological impact. When companies fight to hire employees, often times, you&amp;#8217;ll hear, &amp;#8220;Company X offered me 30,000 shares, and company Y offered me 10,000. Obviously, I&amp;#8217;m going to join company X.&amp;#8221; This is a completely non-sensical statement. What if the 30,000 shares are worth $1 each, and the 10,000 shares are worth $100 each? You need to ask companies, at least, the following:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;How many shares are there.&lt;/li&gt;
	&lt;li&gt;What are the value of the shares.&lt;/li&gt;
	&lt;li&gt;What is your exit strategy.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Using this information, you can determine who is offering you more money, in shares. You can also determine the valuation of the company. For example, if a company has 100 million shares valued at 10 cents each, the company is worth $10 million. The valuation of the company can be extremely important, as you&amp;#8217;ll see in the acquisition section, below.&lt;/p&gt;
&lt;p&gt;It&amp;#8217;s also worth level setting expectations for potential income from the shares you receive. There are generally three scenarios for a startup. The most likely is that the startup dies. The second most likely is that the startup is acquired. The least likely is that the startup IPOs. The simple fact is that very few companies actually have an exit larger than $100 million dollars. If you are an early stage employee at those companies, you will definitely grow your wealth substantially (between $15 million and $100 million, typically), but this is incredibly rare, even in the valley. Let&amp;#8217;s continue with the employee #1 scenario above. Let&amp;#8217;s say that you receive 1% of the company, in shares. A few years later, your company is acquired for $100 million dollars (a fairly large acquisition). You now have $1 million dollars in shares. Are you $1 million dollars richer? No. You owe taxes. Depending on how you handle your grant (&lt;a href=&quot;http://en.wikipedia.org/wiki/Alternative_Minimum_Tax&quot;&gt;&lt;span class=&quot;caps&quot;&gt;AMT&lt;/span&gt;&lt;/a&gt; vs. regular income), and which state you live in (state tax; 10% in California), you&amp;#8217;ll probably earn about $650,000, after taxes. This is a fantastic chunk of money. Does it mean you&amp;#8217;ll be flying private jets? No. It means you&amp;#8217;ll live comfortably, pay your kid&amp;#8217;s college tuition, and not have to worry about losing your house. The media doesn&amp;#8217;t tell you this kind of stuff, when it sensationalizes IPOs and acquisitions.&lt;/p&gt;
&lt;p&gt;I highly recommend &lt;a href=&quot;http://www.quora.com/Startups/When-joining-a-small-startup-15-people-what-are-some-appropriate-questions-to-ask-to-help-determine-the-value-of-your-equity-and-the-potential-of-the-company&quot;&gt;this Quora post&lt;/a&gt; and &lt;a href=&quot;https://blog.wealthfront.com/startup-employee-equity-compensation/&quot;&gt;this Wealthfront post&lt;/a&gt; for further reading.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;ACQUISITIONS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Acquisitions are a hot way to cash out in the valley, these days. Companies like Facebook are &lt;a href=&quot;http://www.washingtonpost.com/national/on-leadership/for-tech-companies-like-facebook-and-google-acqui-hiring-present-latest-management-challenge/2012/10/11/9b4a9744-13ab-11e2-be82-c3411b7680a9_story.html&quot;&gt;acquihiring&lt;/a&gt; failing startups right and left, and a lot of larger companies are flush with cash after IPO&amp;#8217;ing and building up their talent pool.&lt;/p&gt;
&lt;p&gt;Acquisitions of small startups generally serve several purposes. In today&amp;#8217;s competitive hiring environment, acquisitions can be an easy way to get a chunk of good engineers all at once. Additionally, if a startup is competing with a larger company, the company might choose to purchase the startup as a way to protect itself (e.g. Instagram and Facebook). Lastly, and most cynically, an acquisition can be used as a way for VCs to cash themselves out without losing all of their money. Some VCs will use their connections to engineer a purchase of a failing startup that they&amp;#8217;ve invested in, in order to prevent a loss, and save face. I should note, however, that not all acquihires are favorable to VCs.&lt;/p&gt;
&lt;p&gt;One other thing to look out for, especially if you work at a startup, is the fact that VCs get &lt;a href=&quot;http://www.avc.com/a_vc/2011/07/financing-options-preferred-stock.html&quot;&gt;preferred shares&lt;/a&gt;. Essentially, this means that they get paid in full, before anyone else. For example, if a VC puts in $1 million, and the company sells for $10 million, the VC gets his initial $1 million back before anyone else sees a dime. In cases where the startup is failing, and likely sells for about what it was valued at when raising capital, this means the employees walk away with almost nothing.&lt;/p&gt;
&lt;p&gt;Lastly, you need to consider whether the startup that you&amp;#8217;re joining has priced themselves out of an acquisition. What I mean by this is, when a company raises a round of funding, they sell shares to investors at a given price. The price per share determines the value of the company at that point in time. For example, if a startup raises $20 million dollars at $20 per share, and they have 100 million total shares, then the company is worth 2 billion dollars (20 * 100 million). You have to ask yourself, can you see a company purchasing this startup for $2 billion? Anything under a sale of $2 billion means that some of the VCs will lose money, and is unlikely to happen, since VCs typically hold veto rights on deals.&lt;/p&gt;
&lt;p&gt;More reading &lt;a href=&quot;http://pandodaily.com/2012/08/25/the-acqui-hire-scourge-whatever-happened-to-failure-in-silicon-valley/&quot;&gt;here&lt;/a&gt;, &lt;a href=&quot;http://daslee.me/quick-thoughts-on-acquihiressoft-landings&quot;&gt;here&lt;/a&gt;, and &lt;a href=&quot;http://papers.ssrn.com/sol3/papers.cfm?abstract_id=2040924&quot;&gt;here&lt;/a&gt;. I highly recommend the last one, which is a paper from some professors, examining the practice of acquihiring.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;THE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Another way that an employee might reach liquidity with regards to his or her shares is when the company that they work for has a public offering of their shares. In such an event, the company elects to make the shares publicly tradable on a stock exchange, such as the &lt;span class=&quot;caps&quot;&gt;NASDAQ&lt;/span&gt; or &lt;span class=&quot;caps&quot;&gt;NYSE&lt;/span&gt;.&lt;/p&gt;
&lt;h5&gt;S-1 &lt;span class=&quot;caps&quot;&gt;FILING&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;A company that wishes to sell some of their shares on the public market must file an S-1 form with the &lt;span class=&quot;caps&quot;&gt;SEC&lt;/span&gt;. These forms tend to follow a fairly standard layout, though they typically contain cover letters and some freedom to write in plain english. Here are some examples:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.sec.gov/Archives/edgar/data/1490281/000104746911005613/a2203913zs-1.htm&quot;&gt;Groupon&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sec.gov/Archives/edgar/data/1326801/000119312512034517/d287954ds1.htm&quot;&gt;Facebook&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sec.gov/Archives/edgar/data/1345016/000119312511315562/d245328ds1.htm&quot;&gt;Yelp&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://i.i.com.com/cnwk.1d/pdf/ne/2004/google.pdf&quot;&gt;Google&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;If you work for a company that IPOs, you should get familiar with these documents. They provide the first real insight you&amp;#8217;ll probably see into all of the financials of your company, as well as who the largest share holders are.&lt;/p&gt;
&lt;p&gt;The motivation for selling shares varies from company to company, but generally it&amp;#8217;s required to grow workforce, stay afloat, for protection (buying competition), etc. All the typical reasons that you can imagine a company might need a chunk of cash.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;QUIET&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PERIOD&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;After the S-1 is filed, the company enters a quiet period. This is a period of time where the &lt;span class=&quot;caps&quot;&gt;SEC&lt;/span&gt; gathers information, makes sure that everyone has access to the same information, and makes the S-1 &amp;#8220;effective&amp;#8221;. During this time, changes to the S-1 will be filed (based on new information that might come available), and employees are required to say absolutely nothing about the company, the filing, etc. Any information that leaks out and is not in the S-1 can result in a lot of bad things happening including firing employees that leaked the information, delaying the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, etc. The idea, here, is to make it so that everyone, publicly, has the same amount of information available (to prevent insider trading).&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;REPRICING&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Companies will typically re-price their &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; shares (upwards) in the weeks leading up to the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;. Usually, this is a result of increased demand from the market makers, but it also serves the purpose of building hype.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LOCK&lt;/span&gt;-UP &lt;span class=&quot;caps&quot;&gt;PERIOD&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;When a company has an &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, there is typically a period where employees are unable to exercise or trade the shares that they own. This period typically lasts between three and six months from the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; date. The motivation for this is to provide price stability, and prevent shares from flooding the market too quickly. This means, when a company like Facebook goes public, the employees are not selling their shares immediately, and have no more money in their bank account the day after the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; than they did the day before. Instead, it&amp;#8217;s the bankers and VCs that are selling shares early on.&lt;/p&gt;
&lt;p&gt;One exception to this rule is that some companies will offer their employees the chance to participate in the offering, itself, even though they are locked up. In this scenario, employees might be given the chance to sell some percentage of shares on the day of the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;. The caveat here is that the employees will not be selling their shares on the open market. They will be selling them to Wall Street market makers at a reduced price compared to the opening. This is a pretty rare opportunity, I&amp;#8217;ve heard, but it does happen.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SECONDARY&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;OFFERING&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Sometimes, a company that has gone public will file for a secondary offering. This is, essentially, the opportunity for the company to sell more of its shares on the open market. There are generally two reasons that a company might want to do this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;To prevent stock volatility when a lock-up period expires.&lt;/li&gt;
	&lt;li&gt;To raise more money if the stock is doing well.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;You might be wondering how a secondary offering can affect the volatility of a newly IPO&amp;#8217;d stock. When a lockup-period expires, a flood of shares that have been illiquid will suddenly become liquid. In the case of Facebook, for instance, &lt;a href=&quot;http://money.cnn.com/2012/08/15/technology/facebook-lockup/index.html&quot;&gt;270 million new shares&lt;/a&gt; will become available on the market in a single day. On average, 46 million shares of Facebook are traded per day. You can bet that the lockup expiration will have an affect on the share price that day.&lt;/p&gt;
&lt;p&gt;To prevent all shares from flooding the market at once, a company can get some of its institutional investors to participate in a secondary offering. In this case, the company and its institutional investors will agree to sell some of their shares to investment bankers at a slight discount to the current market price. These bankers will then be locked up for a further period of time (but get a discount off the current market value). If you compound this with the initial lockup, it means that the company can stage dumping of its shares across a longer timespan (&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, lock-up expiration, secondary offering), which increases the stability of the stock.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;BLACKOUTS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;After a company has gone public, it will go into its normal quarterly announcements, where it&amp;#8217;ll post it&amp;#8217;s financials, and any other interesting news, to Wall Street. During the blackout period, which can last anywhere from a few weeks to a couple of months (depending on your company, your individual access to data, etc) employees will not be allowed to trade any of the company&amp;#8217;s shares (either buying or selling) to prevent insider trading.&lt;/p&gt;
&lt;p&gt;One way to get around this is to fill out a &lt;a href=&quot;http://en.wikipedia.org/wiki/SEC_Rule_10b5-1&quot;&gt;10b5-1&lt;/a&gt; form. This is an &lt;span class=&quot;caps&quot;&gt;SEC&lt;/span&gt; form that allows you to set up a pre-made schedule that can execute during blackout periods. You can generally set up pretty sophisticated rules, and work with the broker that your company uses (e.g. E-Trade, Schwab, etc) to get your 10b5-1 in place. Typically, executives use these, since they are almost always blacked out since they know a lot about what&amp;#8217;s going on, and don&amp;#8217;t want to risk insider trading.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;WALL&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;STREET&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;To sell &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; shares, a company typically employs underwriters. Underwriters are basically a group of banks that buy the pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; shares from the company, and then turn around and sell them on the public market. The motivation for this is that the underwriters are the ones that incur risk in the case were there turns out to be no market for the shares (people aren&amp;#8217;t buying them). In that case, the banks end up holding shares of the company for longer than they&amp;#8217;d like.&lt;/p&gt;
&lt;p&gt;This has a number of cushy side effects. First, underwriters have a pretty strong strangle-hold on the market, and tend to charge between 5% and 7% for the courtesy of flipping a company&amp;#8217;s shares. Second, underwriters typically provide pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; shares to some of their important investors. Basically, this tends to be free money (if the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; has a bump in price on opening day) for people who are generally pretty wealthy already (when was the last time your bank called you to offer you an opportunity in pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; shares?).&lt;/p&gt;
&lt;p&gt;Facebook and Google are both interesting cases in this area. An alternative to using the typical under-writing system is to do what&amp;#8217;s called a dutch auction, which is the route Google took. From &lt;a href=&quot;http://en.wikipedia.org/wiki/Initial_public_offering#Dutch_Auction&quot;&gt;Wikipedia&lt;/a&gt;, &amp;#8220;This auction method ranks bids from highest to lowest, then accepts the highest bids that allow all shares to be sold, with all winning bidders paying the same price.&amp;#8221; This is much more friendly to the company, since they tend to get a price that&amp;#8217;s closer to what would be offered on the public market. Similarly, because of demand from banks, Facebook was able to play hardball, and threaten to dutch auction, if they did not get their shares underwritten at a much lower percentage. I believe the number that I heard was 1.1% (see &lt;a href=&quot;http://www.reuters.com/article/2012/03/20/net-us-facebook-ipo-idUSBRE82I15N20120320&quot;&gt;Reuters&lt;/a&gt;), which is virtually unheard of.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;OPENING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;BELL&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;When a company&amp;#8217;s shares trade for the first time on the market, there is typically a period after the opening bell where the shares are not actually being traded. That is, the &amp;#8220;sell&amp;#8221; offers are far too high above the &amp;#8220;buy&amp;#8221; offers. As an example, if a company uses banks as underwriters, the underwriters will sell the shares. After that, its up to the owners of the shares to buy and sell on the open market. If the owners of the shares want to sell for $100 a share, and buyers are only willing to pay $50 per share, the stock isn&amp;#8217;t traded, and the market is in a stalemate. After some period of time (an hour or two, usually), the market converges (the buy orders come up, and the sell orders come down), and shares begin trading hands.&lt;/p&gt;
&lt;p&gt;Generally, on the day of an &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, if under-writers are used (the common case), one of two things can happen: the shares close up, or the shares close flat.&lt;/p&gt;
&lt;p&gt;If the shares close up, this can mean a few things. In general, the press coverage is positive, and it looks like the market believes in the company. It can also mean that the company left money on the table. For example, if a company sells its shares to underwriters at $30 a share, and the underwriters sell the shares on the market at $50, and the shares close at $100 at the end of the first day, it&amp;#8217;s likely that the company could have sold the shares for a lot more (say $40-$50 a share). If the company had sold the shares for more, they would have more cash in the bank at the end of the day.&lt;/p&gt;
&lt;p&gt;If, on the other hand, the shares close flat, it means that the company got as much money as they could out of the market, and their bank accounts are about as high as they could theoretically be. The downside is that the press coverage will generally be a little more negative. It also means that the underwriters likely had to buy back the shares. This is a deal that most underwriters agree to when the company sells them shares. Essentially, only for the day of the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, the underwriters are required to buy back any stock that&amp;#8217;s for sale below the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; price. This is &lt;a href=&quot;http://articles.latimes.com/2012/may/18/business/la-fi-tn-facebook-trading-20120518&quot;&gt;precisely what happened with Facebook&lt;/a&gt;. Morgan Stanley was forced to buy back shares on the day of the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;. What this means is that the market believes the shares are worth less than their &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; price, and the underwriter will end up paying more for the stocks than they&amp;#8217;re worth. The underwriters are then forced to hold the shares until the price comes up, or sell the stock (after the day of the &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;) at a loss.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SELLING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;SHARES&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;AFTER&lt;/span&gt; AN &lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;After the dust settles, the lock-up ends, and the secondary offering does (or does not) happen, employees of the company are left to exercise their options, and sell their shares. For early employees, their options&amp;#8217; strike price (the price that employees must pay to buy their shares) is likely relatively low. For example, if you were an early employee, you might get stock options at your company for 50 cents per share. If, post-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt;, the shares are trading at $50 per share, that means that, when you exercise your options, you must pay 50 cents per share (1% of the stock price). For later employees, their strike price is likely much higher, or they simply have restricted stock units (see below).&lt;/p&gt;
&lt;p&gt;Wealthfront, again, has two really great posts on &lt;a href=&quot;https://blog.wealthfront.com/silicon-valley-new-rich-financial-planning/&quot;&gt;divesting shares&lt;/a&gt; and &lt;a href=&quot;https://blog.wealthfront.com/should-i-sell-my-stock/&quot;&gt;selling strategies&lt;/a&gt;. In addition, I also highly recommend &lt;a href=&quot;http://www.amazon.com/Bogleheads-Guide-Investing-Taylor-Larimore/dp/0470067365&quot;&gt;Bogleheads&amp;#8217; Guide to Investing&lt;/a&gt;. Most of it is pretty common sense stuff, but it&amp;#8217;s worth it to read it, and consider your options (no pun intended).&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;RESTRICTED&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;STOCK&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;In the later stages of a pre-&lt;span class=&quot;caps&quot;&gt;IPO&lt;/span&gt; company, and for most larger companies, it&amp;#8217;s likely that employees will receive restricted stock units (RSUs), rather than options. Unlike options, restricted stock has no strike price; you just get the shares for free. Typically, you will receive far fewer RSUs than you would receive options, but they are far less risky, as you will never be &amp;#8220;underwater&amp;#8221;. The term, &amp;#8220;underwater,&amp;#8221; refers to stock options whose strike price is higher than the current market value of the stock, thus making it almost worthless. For example, if a share can be bought for $30 on the public market, and you hold options that have a strike price of $50, it makes no sense to exercise your option to buy the share at $50, when you could buy it for $30. RSUs don&amp;#8217;t carry this risk. In terms of valuing RSUs vs options (since some companies offer both), I&amp;#8217;ve heard that Yahoo! employees typically used a 3x multiplier when receiving shares. That is, they would ask for 300 options instead of 100 RSUs. This is just what I&amp;#8217;ve heard, but it seems fairly reasonable. As usual, &lt;a href=&quot;http://www.quora.com/What-are-the-trade-offs-between-restricted-stock-units-(RSUs)-and-stock-options-as-start-up-employee-compensation&quot;&gt;see Quora for more information&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;TAXES&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Once you&amp;#8217;ve sold your shares, you&amp;#8217;ll need to pay taxes. There is typically one major thing to consider when looking at taxes: how much time has passed between the time that you received the shares, and when you sold them. The reason that this is important is because of the &lt;a href=&quot;http://en.wikipedia.org/wiki/Capital_gains_tax&quot;&gt;capital gains tax&lt;/a&gt;. If you hold your shares for more than a year, the income is treated as capital gains, which, in the United States, is currently taxed by the federal government at 15%. If, on the other hand, you hold your shares for less than a year, you pay normal income tax, which can go up to 35%. If your shares are worth $1 million, this is the difference between $150,000 and $350,000 in income tax, which is huge.&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m not going to get into the nuances of this subject, as it&amp;#8217;s quite complicated. &lt;a href=&quot;http://www.quora.com/What-are-the-tax-implications-of-joining-a-startup-as-an-equity-partner&quot;&gt;Read&lt;/a&gt; &lt;a href=&quot;http://www.startupcompanylawyer.com/2008/02/15/what-is-an-83b-election/&quot;&gt;these&lt;/a&gt; &lt;a href=&quot;http://www.quora.com/Startups/If-youre-in-a-startup-is-it-ever-a-good-idea-to-exercise-your-options-early-Why-or-why-not&quot;&gt;posts&lt;/a&gt;, and consult a tax advisor. It can make a huge difference. Also, beware of quarterly tax filings.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;TRICKS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;I thought it&amp;#8217;d be neat to include a couple of other fun tidbits. Did you ever wonder how Romney ended up with &lt;a href=&quot;http://www.boston.com/news/politics/articles/2012/08/11/mitt_romneys_ira_is_unlikely_centerpiece_of_wealth_and_tax_avoidance/&quot;&gt;$100 million in a tax-protected &lt;span class=&quot;caps&quot;&gt;IRA&lt;/span&gt;&lt;/a&gt;? Basically, there are some &lt;a href=&quot;http://blogs.reuters.com/felix-salmon/2012/07/16/did-romney-put-bain-capital-shares-in-his-ira/&quot;&gt;tricks that you can play&lt;/a&gt; that allow you to put very cheap shares of an early stage company into your &lt;span class=&quot;caps&quot;&gt;IRA&lt;/span&gt; (at a very low valuation). If that company&amp;#8217;s valuation then rises, and the shares become liquid, you can cash out, and have a huge chunk of savings grow tax free in an &lt;span class=&quot;caps&quot;&gt;IRA&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Another neat benefit that executives get are interest free loans when they join. Why might they need such a loan? Well, among other things, &lt;a href=&quot;http://scholarship.law.wm.edu/cgi/viewcontent.cgi?article=1344&amp;amp;context=facpubs&quot;&gt;to purchase all of the shares that are offered to them&lt;/a&gt; at the time that they join. This starts the clock on the one year capital gains threshold, which drastically reduces their tax basis. Typically such loans are only ever re-paid if the shares become liquid, and the executive cashes out. Pretty good deal.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;FURTHER&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;READING&lt;/span&gt;&lt;/h5&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://avc.com&quot;&gt;&lt;span class=&quot;caps&quot;&gt;AVC&lt;/span&gt;: Musings of a VC in &lt;span class=&quot;caps&quot;&gt;NYC&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.feld.com/&quot;&gt;Feld Thoughts&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.askthevc.com/&quot;&gt;Ask the VC&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.bothsidesofthetable.com/&quot;&gt;Both Sides of the Table&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.sethlevine.com/&quot;&gt;VC Adventure&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://steveblank.com/&quot;&gt;Steve Blank&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://blog.wealthfront.com&quot;&gt;Wealthfront Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
				<pubDate>Mon, 22 Oct 2012 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/social/2012-10-22-tech-exits-what-you-should-know</link>
				<guid isPermaLink="true">http://riccomini.name/posts/social/2012-10-22-tech-exits-what-you-should-know</guid>
			</item>
		
			<item>
				<title>Hortonworks YARN Developer Meetup Notes (October '12)</title>
				<description>&lt;h5&gt;What is &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;&lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; is a generic cluster-scheduler for managing executing processes in a distributed environment. &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; is going to be used in Hadoop&amp;#8217;s next-generation Map/Reduce framework. For more, have a look at &lt;a href=&quot;http://hadoop.apache.org/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/YARN.html&quot;&gt;this page&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;Building Applications on &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;I presented this deck &lt;a href=&quot;http://www.meetup.com/Hadoop-Contributors/events/85353562/&quot;&gt;at the meet-up&lt;/a&gt;. My focus was mostly on the architecture of a &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; application, design decisions that need to be made, and the trade-off between high and low coupling with Hadoop (&lt;span class=&quot;caps&quot;&gt;HDFS&lt;/span&gt;, Kerberos, metrics2, Configuration, etc).&lt;/p&gt;
&lt;p&gt;&lt;iframe src=&quot;http://www.slideshare.net/slideshow/embed_code/14721401&quot; width=&quot;476&quot; height=&quot;400&quot; frameborder=&quot;0&quot; marginwidth=&quot;0&quot; marginheight=&quot;0&quot; scrolling=&quot;no&quot;&gt;&lt;/iframe&gt;&lt;/p&gt;
&lt;p&gt;One thing that I wish I&amp;#8217;d included in this presentation was a slide on testing. This is an area where Map/Reduce has fallen short, traditionally, and it&amp;#8217;s unfortunate, because M/R jobs could be so easily mock-able and unit-testable. My take aways are:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;It&amp;#8217;s annoying to test your AM but you really need to do it.&lt;/li&gt;
	&lt;li&gt;Make your APIs easily mockable. Pay &lt;strong&gt;close&lt;/strong&gt; attention to mock-ability of the storage layer.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Another minor note regarding the logging slide: The NMs can be configured to post logs to locations other than &lt;span class=&quot;caps&quot;&gt;HDFS&lt;/span&gt; servers (for example, &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; servers), so there is an alternative to letting your logs expire on the NM machine if you&amp;#8217;re not running &lt;span class=&quot;caps&quot;&gt;HDFS&lt;/span&gt;. This is done by specifying an &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; path instead of an &lt;span class=&quot;caps&quot;&gt;HDFS&lt;/span&gt; one.&lt;/p&gt;
&lt;p&gt;Lastly, regarding the orphaned subprocess section, you might want to have a look at my previous post: &lt;a href=&quot;http://riccomini.name/posts/linux/2012-09-25-kill-subprocesses-linux-bash/&quot;&gt;Killing Subprocesses in Linux/Bash&lt;/a&gt;&lt;/p&gt;
&lt;h5&gt;Highlights&lt;/h5&gt;
&lt;p&gt;There was a really interesting request from someone: NodeManager labels (e.g. &amp;#8220;gpu&amp;#8221;, &amp;#8220;flash disk&amp;#8221;, etc). This would allow ApplicationMasters to do resource requests based on lables. For example, &amp;#8220;Only give me containers on nodes with flash disks.&amp;#8221; With this feature, you could even partition &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; clusters in this way (e.g. &amp;#8220;map-red&amp;#8221; label vs &amp;#8220;storm&amp;#8221; label).&lt;/p&gt;
&lt;p&gt;A lot of gripes from users were about how clunky the &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; was for interacting with the RM and NM. The &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; developers are really aware of this, and were asking for a lot of feedback. I was really excited to hear discussion about a call-back based &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; for AMs. This would eliminate, or at least hide, the current &amp;#8216;poll the RM&amp;#8217; style AMs that are being written. Instead, AMs would just receive method callbacks for things like onNewContainer, onContainerKilled, etc. On the client side, Arun and Vinod also mentioned some improvements in the Client &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;Yahoo&amp;#8217;s presentation had a few pros and cons that I strongly agreed with. They said that &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; was &amp;#8216;surprisingly stable&amp;#8217;. I definitely agree with this. Aside from an issue we had with it on truck, a year ago, I haven&amp;#8217;t seen any bugs in it. On the con side, Yahoo mentioned the lack of a generic log-history server, as well as difficulty debugging ApplicationMasters.&lt;/p&gt;
&lt;p&gt;Regarding debugging ApplicationMasters, in 2.0.2, a new feature, called &amp;#8216;Unmanaged AM&amp;#8217; has been added to test AMs locally by emulating the RM. To test your AM locally, you execute a command like, &amp;#8220;yarn am &amp;lt;class&amp;gt;&amp;#8221;. The coolest part of this feature is that the containers will still execute on the real cluster; only your AM will be local. This should allow for &amp;#8220;real world&amp;#8221; testing of your AM.&lt;/p&gt;
&lt;p&gt;Another minor request that I had was to add job tagging, so clients could tag their jobs as &amp;#8220;map-reduce&amp;#8221;, &amp;#8220;storm&amp;#8221;, &amp;#8220;s4&amp;#8221;, etc. This makes it easier for dashboards to deal with mix-worload &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; clusters, where showing certain jobs in a dashboard doesn&amp;#8217;t make sense.&lt;/p&gt;
&lt;h5&gt;Yahoo&amp;#8217;s experience with &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; and 0.23&lt;/h5&gt;
&lt;ul&gt;
	&lt;li&gt;The good:
	&lt;ul&gt;
		&lt;li&gt;Running on a 0.23.3 on a 2000 node cluster.&lt;/li&gt;
		&lt;li&gt;Suprisingly stable.&lt;/li&gt;
		&lt;li&gt;150,000 jobs run.&lt;/li&gt;
		&lt;li&gt;Validated isolated tests on 10,000 nodes.&lt;/li&gt;
		&lt;li&gt;Big win is web services. Had been scraping pages, and now it&amp;#8217;s in &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt;/&lt;span class=&quot;caps&quot;&gt;REST&lt;/span&gt;.&lt;/li&gt;
		&lt;li&gt;Higher utilization with no fixed partitioning between mappers and reducers.&lt;/li&gt;
		&lt;li&gt;Performance is on-par/better at everything (Read, sort, shuffle, gridmix, small jobs).&lt;/li&gt;
		&lt;li&gt;Other paradigms looking into (Spark, &lt;span class=&quot;caps&quot;&gt;MPI&lt;/span&gt;, S4, Storm, Giraph)&lt;/li&gt;
		&lt;li&gt;Question: Has anyone thought about open graph (&lt;span class=&quot;caps&quot;&gt;MPI&lt;/span&gt;-related)?&lt;/li&gt;
	&lt;/ul&gt;&lt;/li&gt;
	&lt;li&gt;The not so good:
	&lt;ul&gt;
		&lt;li&gt;Oozie on &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; can have deadlocks when queues are mis-configured&lt;/li&gt;
		&lt;li&gt;UI scalability issues (very large tables, and pagination in JS)&lt;/li&gt;
		&lt;li&gt;Minor incompatibilities in distributed cache&lt;/li&gt;
		&lt;li&gt;No generic history server&lt;/li&gt;
		&lt;li&gt;AM failures hard to debug&lt;/li&gt;
	&lt;/ul&gt;&lt;/li&gt;
	&lt;li&gt;Will be installing it on a 3600 node cluster next week&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Follow up about posting logs back to &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt;.&lt;/p&gt;
&lt;h5&gt;Future work&lt;/h5&gt;
&lt;p&gt;Arun and Vinod presented on future work.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;Multiple resource dimensions (priority, memory, cpu, data locality, etc) when making your request&lt;/li&gt;
	&lt;li&gt;Complaints about existing ClientRMProtocol, AMRMProtocol, ContainerMAnagerProtocol
	&lt;ul&gt;
		&lt;li&gt;How does RM/NM prioritize resource requests with multiple dimensions? By host/rack? By memory? &lt;span class=&quot;caps&quot;&gt;CPU&lt;/span&gt;?&lt;/li&gt;
		&lt;li&gt;Release/reject of containers: you can go to either RM or NM to reject. Which do I do? &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; is confusing.&lt;/li&gt;
		&lt;li&gt;Ask for specific nodes/racks (pin jobs to specific hosts)&lt;/li&gt;
		&lt;li&gt;Black list certain racks/nodes. Can&amp;#8217;t do this now.&lt;/li&gt;
		&lt;li&gt;Overload allocate call. Want more specific &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; rather than generic one (getSatuts, killContainer, etc).&lt;/li&gt;
		&lt;li&gt;Gang scheduling is a pending improvement. &amp;#8220;I need all 10 containers, or none.&amp;#8221;&lt;/li&gt;
	&lt;/ul&gt;&lt;/li&gt;
	&lt;li&gt;Resources
	&lt;ul&gt;
		&lt;li&gt;Want to recognize # of cores on the system, not just memory, when requesting resources. (&lt;span class=&quot;caps&quot;&gt;CPU&lt;/span&gt; support).&lt;/li&gt;
	&lt;/ul&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
				<pubDate>Fri, 12 Oct 2012 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/hadoop/2012-10-12-hortonworks-yarn-meetup</link>
				<guid isPermaLink="true">http://riccomini.name/posts/hadoop/2012-10-12-hortonworks-yarn-meetup</guid>
			</item>
		
			<item>
				<title>Kafka Consumer Memory Tuning</title>
				<description>&lt;p&gt;Yesterday, I had a process that was consuming a single Kafka topic. I was running it in our &amp;#8220;staging&amp;#8221; environment, and everything worked great. My heap space for the process was set to 512 megabytes (-Xmx512M). When I moved this process to production, my process would fail with an out of memory exception. I was seeing:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;java.lang.OutOfMemoryError: Java heap space
BoundedByteBufferReceive [ERROR] OOME with size 4800026
java.lang.OutOfMemoryError: GC overhead limit exceeded
FetcherRunnable [ERROR] error in FetcherRunnable&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&amp;#8217;s review what happened, and how to fix it.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;BUFFERS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;When you create a Kafka consumer, you first instantiate a Kafka connector (&lt;a href=&quot;https://github.com/kafka-dev/kafka/blob/master/core/src/main/scala/kafka/consumer/ConsumerConnector.scala&quot;&gt;ConsumerConnector.scala&lt;/a&gt;). Then, you create multiple threads that feed off of one or more topics:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;// create 4 partitions of the stream for topic &quot;test&quot;, to allow 4 threads to consume
Map&amp;lt;String, List&amp;lt;KafkaStream&amp;lt;Message&amp;gt;&amp;gt;&amp;gt; topicMessageStreams = 
    consumerConnector.createMessageStreams(ImmutableMap.of(&quot;test&quot;, 4));
List&amp;lt;KafkaStream&amp;lt;Message&amp;gt;&amp;gt; streams = topicMessageStreams.get(&quot;test&quot;);&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Internally, Kafka creates a buffer for each thread attached to the ConsumerConnector. In this case, there are four threads, and therefore four buffers. These buffers, which are queues, are populated asynchronously until they are &amp;#8220;full&amp;#8221;. When your code reads from a stream, Kafka dequeues from the stream/thread&amp;#8217;s queue, and gives you a message.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;TUNING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;MEMORY&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;USAGE&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Two important questions arise from this:&lt;/p&gt;
&lt;ol&gt;
	&lt;li&gt;When are the queues full?&lt;/li&gt;
	&lt;li&gt;What are the queues populated with?&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;A queue is full when it reaches the configured maximum queue size (queuedchunks.max). That is, if queuedchunks.max=10, then the queue will be full when 10 objects are in it.&lt;/p&gt;
&lt;p&gt;This leads me to question number two: What are these objects that the queue is populated with? It turns out, &lt;strong&gt;they are not messages&lt;/strong&gt;. Instead, they are fetched byte buffers that contain &lt;strong&gt;multiple messages&lt;/strong&gt;. The size of these byte buffers is determined by the configuration parameter: fetch.size.&lt;/p&gt;
&lt;p&gt;So, to calculate how much memory your consumer is going to take, you have to use this formula:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;(number of consumer threads) * (queuedchunks.max) * (fetch.size)&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, if you have 24 threads, a max queue size of 10, and a fetch.size of 1.2 megabytes, your consumer is going to take 288 megabytes of heap space (24 threads * 10 fetches * 1.2 megabytes/fetch) if all queues are full.&lt;/p&gt;
&lt;p&gt;If you run out of space, you have a few options: increase heap space, reduce your consumer threads, or lower your fetch size or max queue size. Obviously, different tunings have different affects on your throughput. With fewer buffers, or fewer fetches per queue, you might negatively impact your throughput.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;WHAT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;HAPPENED&lt;/span&gt; TO MY &lt;span class=&quot;caps&quot;&gt;PROCESS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;The number of threads in my process was dependent on how many partitions the topic had that I was consuming from. When I moved from staging to production, the Kafka cluster I was consuming from had far more brokers, and far more partitions per topic. As a result, the memory footprint of my process drastically changed. I went from 22 threads to 32, which changed my heap usage from 264 megabytes to 384 megabytes. This was enough to set my process&amp;#8217; total memory usage over 512 megabytes, which caused the out of memory exceptions.&lt;/p&gt;</description>
				<pubDate>Fri, 05 Oct 2012 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/kafka/2012-10-05-kafka-consumer-memory-tuning</link>
				<guid isPermaLink="true">http://riccomini.name/posts/kafka/2012-10-05-kafka-consumer-memory-tuning</guid>
			</item>
		
			<item>
				<title>Schedules & Scores API for Streaming Live Sports Stats</title>
				<description>&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;WHAT&lt;/span&gt; I &lt;span class=&quot;caps&quot;&gt;NEEDED&lt;/span&gt;&lt;/h5&gt;
&lt;ol&gt;
	&lt;li&gt;Daily game schedules for &lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;, and &lt;span class=&quot;caps&quot;&gt;NHL&lt;/span&gt; (the big four).&lt;/li&gt;
	&lt;li&gt;Scores and times for &lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;, and &lt;span class=&quot;caps&quot;&gt;NHL&lt;/span&gt;. Can be delayed a minute or two.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;I did a bit of reading, and found a few relevant Quora discussions:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.quora.com/What-options-are-there-for-streaming-sports-stats-APIs&quot;&gt;What options are there for streaming sports stats APIs?&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.quora.com/Are-there-any-APIs-with-game-schedules-available-for-NFL-NCAA-FB-NBA-NCAA-BB-and-MLB-teams&quot;&gt;Are there any APIs with game schedules available for &lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NCAA&lt;/span&gt; FB, &lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NCAA&lt;/span&gt; BB, and &lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt; teams?&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;After some research, I was able to get the data I needed for free via either of two sources: &lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt; or &lt;span class=&quot;caps&quot;&gt;ESPN&lt;/span&gt;. Later, I decided that I wanted a more secure/legitimate/reliable method of getting score data, so I switched to a pay service called &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; Live Scores. I&amp;#8217;ve decided to document my experience in this post.&lt;/p&gt;
&lt;p&gt;I encourage you not to abuse the free APIs by polling them too frequently.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;ESPN&lt;/span&gt; (&lt;span class=&quot;caps&quot;&gt;FREE&lt;/span&gt;)&lt;/h5&gt;
&lt;p&gt;As I said, when I first started out, I was interested in a free solution. I found a few nice write-ups on how to get the scores from &lt;span class=&quot;caps&quot;&gt;ESPN&lt;/span&gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.wecodethings.com/blog/post.cfm/free-nfl-live-scores-feed-using-coldfusion-can-be-used-for-nba-ncaa-nhl-golf-scores-feed&quot;&gt;http://www.wecodethings.com/blog/post.cfm/free-nfl-live-scores-feed-using-coldfusion-can-be-used-for-nba-ncaa-nhl-golf-scores-feed&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.dbstalk.com/archive/index.php/t-207334.html&quot;&gt;http://www.dbstalk.com/archive/index.php/t-207334.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It turns out, &lt;span class=&quot;caps&quot;&gt;ESPN&lt;/span&gt; has a little app called &lt;a href=&quot;http://espn.go.com/bottomline/&quot;&gt;BottomLine&lt;/a&gt;, which makes &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; requests to a few endpoints to get live sports data. This data is very easy to parse. Here are a few examples:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/nfl/bottomline/scores&quot;&gt;http://sports.espn.go.com/nfl/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/nba/bottomline/scores&quot;&gt;http://sports.espn.go.com/nba/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/mlb/bottomline/scores&quot;&gt;http://sports.espn.go.com/mlb/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/nhl/bottomline/scores&quot;&gt;http://sports.espn.go.com/nhl/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/ncf/bottomline/scores&quot;&gt;http://sports.espn.go.com/ncf/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/rpm/bottomline/race&quot;&gt;http://sports.espn.go.com/rpm/bottomline/race&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/sports/golf/bottomLineGolfLeaderboard&quot;&gt;http://sports.espn.go.com/sports/golf/bottomLineGolfLeaderboard&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/wnba/bottomline/scores&quot;&gt;http://sports.espn.go.com/wnba/bottomline/scores&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://sports.espn.go.com/espn/bottomline/news&quot;&gt;http://sports.espn.go.com/espn/bottomline/news&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As you can see, the data is just &lt;span class=&quot;caps&quot;&gt;URL&lt;/span&gt; encoded values. Everything here is pretty much live.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LEAGUE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;SITES&lt;/span&gt; (&lt;span class=&quot;caps&quot;&gt;FREE&lt;/span&gt;)&lt;/h5&gt;
&lt;p&gt;Each league (&lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;NHL&lt;/span&gt;, &lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt;) exposes live scores on their website. All of these guys use &lt;span class=&quot;caps&quot;&gt;AJAX&lt;/span&gt;, which means it&amp;#8217;s possible to yank out the call that they&amp;#8217;re using, and make the call yourself, programmatically. Here are some relevant end points:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://data.nba.com/data/10s/xml/nbacom/2012/scores/playoffs/series_matchup_us.xml&quot;&gt;&lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://live.nhle.com/GameData/RegularSeasonScoreboardv3.jsonp&quot;&gt;&lt;span class=&quot;caps&quot;&gt;NHL&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.nfl.com/liveupdate/scorestrip/scorestrip.json&quot;&gt;&lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://gd2.mlb.com/components/game/mlb/year_2012/month_05/day_15/master_scoreboard.json&quot;&gt;&lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You will have to reverse engineer the format of the data, but it&amp;#8217;s usually pretty straight forward. I didn&amp;#8217;t bother with this solution because polling these end points is usually a violation of the terms of service for the respective league, and I didn&amp;#8217;t want to have a per-league score parser.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt; (&lt;span class=&quot;caps&quot;&gt;FREE&lt;/span&gt;)&lt;/h5&gt;
&lt;p&gt;Another alternative that I found, but have not seen documented anywhere, is to use MSNBC&amp;#8217;s live scores. Nearly all news outlets have live scores for sports, so all you need to do is find one that&amp;#8217;s making &lt;span class=&quot;caps&quot;&gt;AJAX&lt;/span&gt; calls to refresh the scores, and pull out the &lt;span class=&quot;caps&quot;&gt;URL&lt;/span&gt; that they&amp;#8217;re using. The one with the easiest formatting was &lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt;.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://scores.nbcsports.msnbc.com/ticker/data/gamesMSNBC.js.asp?jsonp=true&amp;amp;sport=MLB&amp;amp;period=20120929&quot;&gt;&lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt; Scores&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When looking at the &lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt; scores in the browser, make sure to view the source, since they have &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; encoded in &lt;span class=&quot;caps&quot;&gt;JSON&lt;/span&gt; (sigh).&lt;/p&gt;
&lt;p&gt;This is the route that I ended up using for free scores. Unlike ESPN&amp;#8217;s &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt;, which is a bit clunky, &lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt; provides a nice &lt;span class=&quot;caps&quot;&gt;JSON&lt;/span&gt; interface. I polled these scores once every 30 seconds, in rotation (&lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt;, wait 30s, &lt;span class=&quot;caps&quot;&gt;NBA&lt;/span&gt;, wait 30s, &lt;span class=&quot;caps&quot;&gt;NFL&lt;/span&gt;, wait 30s, etc). Here&amp;#8217;s some example code (in Python) to get live scores:&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3805436.js&quot;&gt; &lt;/script&gt;&lt;p&gt;I should note that I&amp;#8217;m using a couple of Python libraries for help:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://pytz.sourceforge.net/&quot;&gt;pytz&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://effbot.org/zone/element-index.htm&quot;&gt;ElementTree&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Again, this is a violation of their terms of service, so beware.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;LIVE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;SCORES&lt;/span&gt; (&amp;lt;$300/mo)&lt;/h5&gt;
&lt;p&gt;These are the guys that I use now. Their &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; is reasonably reliable, and they are really responsive via e-mail. Strangely, they seem to have two sites:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://xml-livescores.com/&quot;&gt;http://xml-livescores.com/&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://xml-sportsfeeds.com/&quot;&gt;http://xml-sportsfeeds.com/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I contacted them via the first one (&lt;a href=&quot;http://xml-livescores.com/&quot;&gt;http://xml-livescores.com/&lt;/a&gt;), but their &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; is on the second one. Here&amp;#8217;s an example of their &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; data.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3805418.js&quot;&gt; &lt;/script&gt;&lt;p&gt;To get the data, an &lt;span class=&quot;caps&quot;&gt;HTTP&lt;/span&gt; request is made:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;curl http://xml-sportsfeeds.com/xml/baseball/livescore/?key=...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;I pay in Euros, via PayPal.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TEAM&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;I spoke with an &lt;span class=&quot;caps&quot;&gt;XML&lt;/span&gt; team sales rep, who told me that I could get what I needed using their &lt;a href=&quot;http://www.xmlteam.com/fod/&quot;&gt;FlexSport On Demand&lt;/a&gt; package, which is their low-end pay-as-you-go package. This would have worked great if I were just interested in scheduling, but since I wanted near-realtime scores, the cost would have been too great. They wanted something like 25c per league score request, which would have worked out to 25c a minute per league.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;FANFEEDR&lt;/span&gt; ($3500/mo)&lt;/h5&gt;
&lt;p&gt;Before using &lt;span class=&quot;caps&quot;&gt;MSNBC&lt;/span&gt;, I was actually using &lt;a href=&quot;http://developer.fanfeedr.com/&quot;&gt;FanFeedr&lt;/a&gt;. At the time, they provided a free &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt; to get live scores, topics, discussion, roster information, etc. Shortly after I began using the site, though, they began charging a minimum of $3,500 a month. Here&amp;#8217;s &lt;a href=&quot;http://developer.fanfeedr.com/forum/read/156334&quot;&gt;my discussion with them&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SPORTS&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;DIRECT&lt;/span&gt; (~$4,000/mo)&lt;/h5&gt;
&lt;p&gt;I got in touch with a guy named John Morash. His response to my inquiry was:&lt;/p&gt;
&lt;p&gt;Thanks for getting back to me.  We do have the items that you’re looking for but the cost of our service is much greater than $300/mo.  We’re not at the level of &lt;span class=&quot;caps&quot;&gt;STATS&lt;/span&gt; Inc. ($4k+) but feel our product is every bit as good.  We don’t compete on price with some of the low-cost vendors however, so it sounds like there may be another option that’s a better fit for you.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;OTHERS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;There are some other interesting APIs and sites that I didn&amp;#8217;t bother looking at.&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;&lt;a href=&quot;http://www.stats.com/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;STATS&lt;/span&gt; Inc&lt;/a&gt; (the big guys)&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://getchalk.com/&quot;&gt;Chalk&lt;/a&gt;&lt;/li&gt;
	&lt;li&gt;&lt;a href=&quot;http://getchalk.com/&quot;&gt;&lt;span class=&quot;caps&quot;&gt;MLB&lt;/span&gt; Stats&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description>
				<pubDate>Sat, 29 Sep 2012 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/game-time-baby/2012-09-29-streaming-live-sports-schedule-scores-stats-api</link>
				<guid isPermaLink="true">http://riccomini.name/posts/game-time-baby/2012-09-29-streaming-live-sports-schedule-scores-stats-api</guid>
			</item>
		
			<item>
				<title>Killing Subprocesses in Linux/Bash</title>
				<description>&lt;p&gt;Lately, I&amp;#8217;ve been working with &lt;a href=&quot;http://hadoop.apache.org/docs/r0.23.0/hadoop-yarn/hadoop-yarn-site/YARN.html&quot;&gt;&lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;&lt;/a&gt; at LinkedIn. This framework allows you to execute Bash scripts on one or more machines. It&amp;#8217;s used primarily for Hadoop. When using &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;, you often end up with nested Bash scripts with no parent process ID (&lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt;) when the NodeManager launches the Bash script. This can be pretty problematic when the NodeManager is shut down, since you must make sure to clean up all child subprocesses via your parent Bash script.&lt;/p&gt;
&lt;h5&gt;Understanding Linux Subprocesses&lt;/h5&gt;
&lt;p&gt;Let&amp;#8217;s start with an example. We&amp;#8217;ll have two shell scripts: a parent, and a child:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cat parent.sh 
#!/bin/bash
./child.sh&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;$ cat child.sh 
#!/bin/bash
sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Normally, when you launch nested processes from a terminal, you&amp;#8217;ll see a process tree that looks something like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   10911 10701  0 05:07 pts/1    00:00:00 /bin/bash ./parent.sh
ubuntu   10912 10911  0 05:07 pts/1    00:00:00 /bin/bash ./child.sh
ubuntu   10913 10912  0 05:07 pts/1    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;In this example, a terminal (&lt;span class=&quot;caps&quot;&gt;PID&lt;/span&gt; 10701) calls parent.sh, which calls child.sh, which calls sleep 1000. With &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;, you end up with a process tree that looks more like this:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   10966     1  0 05:14 pts/1    00:00:00 /bin/bash ./parent.sh
ubuntu   10967 10966  0 05:14 pts/1    00:00:00 /bin/bash ./child.sh
ubuntu   10968 10967  0 05:14 pts/1    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Notice that the &lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt; of parent.sh is now 1. This is essentially a top-level process that has no parent.&lt;/p&gt;
&lt;h5&gt;Unexpected Behavior&lt;/h5&gt;
&lt;p&gt;In both of these examples, it seems intuitive that killing the top level parent would result in all of the children being cleaned up. There are a &lt;a href=&quot;http://en.wikipedia.org/wiki/Kill_(command)&quot;&gt;number of ways to kill a process&lt;/a&gt;, so let&amp;#8217;s start with:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ kill -9 10966&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   10966     1  0 05:14 pts/1    00:00:00 /bin/bash ./parent.sh
ubuntu   10967 10966  0 05:14 pts/1    00:00:00 /bin/bash ./child.sh
ubuntu   10968 10967  0 05:14 pts/1    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As expected, killing the parent does not clean up any children:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   10967     1  0 05:14 pts/1    00:00:00 /bin/bash ./child.sh
ubuntu   10968 10967  0 05:14 pts/1    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Let&amp;#8217;s try sending a kill signal that&amp;#8217;s not quite as strong as kill -9. For a list of possible signals, try running:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ kill -l
 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
63) SIGRTMAX-1  64) SIGRTMAX&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, let&amp;#8217;s try this again with a normal &lt;a href=&quot;http://en.wikipedia.org/wiki/SIGHUP&quot;&gt;&lt;span class=&quot;caps&quot;&gt;SIGHUP&lt;/span&gt;&lt;/a&gt; kill. One might expect that sending such a soft kill signal should result in the child processes being cleaned up.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ kill -SIGHUP 10967&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   10968     1  0 05:14 pts/1    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, even &lt;span class=&quot;caps&quot;&gt;SIGHUP&lt;/span&gt; does not kill the child processes; it leaves the sleep call orphaned with a &lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt; of 1.&lt;/p&gt;
&lt;p&gt;So, how can we do this properly?&lt;/p&gt;
&lt;h5&gt;Traps&lt;/h5&gt;
&lt;p&gt;One solution is to &lt;a href=&quot;http://stackoverflow.com/questions/2525855/how-to-propagate-a-signal-through-an-arborescence-of-scripts-bash&quot;&gt;use traps&lt;/a&gt; in the Bash script. A trap is a way to say &amp;#8220;do this before exiting&amp;#8221; in a Bash script. For example, we might add the following line to parent.sh and child.sh:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;trap 'kill $(jobs -p)' EXIT&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Now, if we kill the parent, all children will be cleaned up! Obviously, this only works with softer kill signals, such as &lt;span class=&quot;caps&quot;&gt;SIGHUP&lt;/span&gt;. For example, if we have this process tree:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   11049 10758  0 05:31 pts/2    00:00:00 /bin/bash ./parent.sh
ubuntu   11050 11049  0 05:31 pts/2    00:00:00 /bin/bash ./child.sh
ubuntu   11051 11050  0 05:31 pts/2    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You can execute:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ kill 11049
$ ps -ef | grep sleep&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;And you will see that sleep is no longer running!&lt;/p&gt;
&lt;h5&gt;Top-Level Trap&lt;/h5&gt;
&lt;p&gt;A variation of having a trap in each Bash file is to have a single top-level trap that uses &amp;#8216;ps&amp;#8217; to find children:&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3786342.js&quot;&gt; &lt;/script&gt;&lt;p&gt;This is a less than ideal solution, but it does work. For details, see &lt;a href=&quot;http://stas-blogspot.blogspot.com/2010/02/kill-all-child-processes-from-shell.html&quot;&gt;this page&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;Kill PPIDs&lt;/h5&gt;
&lt;p&gt;Running traps everywhere can be kind of clunky, and error prone. A cleaner approach is to use the kill command, and provide a parent process ID (&lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt;) instead of a process ID. To do this, the syntax gets funky. You use a negative of the parent process ID, like so:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;kill -- -&amp;lt;PPID&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For example, with this process tree:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;UID        PID  PPID  C STIME  TTY         TIME CMD
ubuntu   11096     1  0 05:36 ?        00:00:00 /bin/bash ./parent.sh
ubuntu   11097 11096  0 05:36 ?        00:00:00 /bin/bash ./child.sh
ubuntu   11098 11097  0 05:36 ?        00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;You would run:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;kill -- -11096
ps -ef | grep sleep&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, killing with a &lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt; automatically cleans all subprocesses, including nested subprocesses!&lt;/p&gt;
&lt;h5&gt;exec&lt;/h5&gt;
&lt;p&gt;Another handy trick is to use &lt;a href=&quot;http://linux.die.net/man/3/exec&quot;&gt;exec&lt;/a&gt; when nesting Bash calls. Exec replaces the &amp;#8220;current&amp;#8221; process with the &amp;#8220;child&amp;#8221; process. This doesn&amp;#8217;t always work, but for our example (parent, child, sleep), it certainly does. Let&amp;#8217;s make parent and child look like this, respectively:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ cat parent.sh
#!/bin/bash
exec ./child.sh&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;$ cat child.sh
#!/bin/bash
exec sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;Notice the &amp;#8220;exec&amp;#8221; command preceding the child.sh and sleep calls. Let&amp;#8217;s have a look at the process tree:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;$ ps -ef | grep parent
$ ps -ef | grep child
$ ps -ef | grep sleep
ubuntu   11155 10758  0 05:41 pts/2    00:00:00 sleep 1000&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;As you can see, only a &amp;#8216;sleep&amp;#8217; process exists. The parent.sh script &amp;#8220;becomes&amp;#8221; child.sh, and child.sh &amp;#8220;becomes&amp;#8221; sleep. This makes it very easy to clean up child processes, because there are none! To clean up, you simply kill the &amp;#8216;sleep&amp;#8217; process. This is the method that I use with &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt;, since I&amp;#8217;m executing nested Bash calls that lead to a single Java process.&lt;/p&gt;
&lt;h5&gt;Python&lt;/h5&gt;
&lt;p&gt;If you&amp;#8217;re not strictly tied to Bash, you might be interested in Python&amp;#8217;s &lt;a href=&quot;http://code.google.com/p/psutil/&quot;&gt;psutil&lt;/a&gt; library. It &lt;a href=&quot;http://stackoverflow.com/questions/1230669/subprocess-deleting-child-processes-in-windows&quot;&gt;can be used to kill all subprocess&lt;/a&gt; for a given process ID.&lt;/p&gt;
&lt;h5&gt;setsid&lt;/h5&gt;
&lt;p&gt;One other minor note. You might be wondering how you end up with a &lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt; of 1. Obviously, kill -9&amp;#8217;ing will do it. You can also use a command called &lt;a href=&quot;http://linux.die.net/man/2/setsid&quot;&gt;setsid&lt;/a&gt;. This is what &lt;span class=&quot;caps&quot;&gt;YARN&lt;/span&gt; does when its NodeManager executes a child process. To try and execute parent.sh with a &lt;span class=&quot;caps&quot;&gt;PPID&lt;/span&gt; of 1, execute:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;setsid ./parent.sh&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;For further reading, check the &lt;a href=&quot;http://en.wikipedia.org/wiki/Nohup&quot;&gt;nohup&lt;/a&gt; wiki, which can be used as an alternative to setsid.&lt;/p&gt;</description>
				<pubDate>Tue, 25 Sep 2012 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/linux/2012-09-25-kill-subprocesses-linux-bash</link>
				<guid isPermaLink="true">http://riccomini.name/posts/linux/2012-09-25-kill-subprocesses-linux-bash</guid>
			</item>
		
			<item>
				<title>Hadoop, Pig, and SQL</title>
				<description>&lt;p&gt;For more detailed documentation, please see the official &lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.6.0/piglatin_ref2.html&quot;&gt;Pig manual&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Please feel free to add more examples or documentation in the comments section.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SELECT&lt;/span&gt;&lt;/h5&gt;
&lt;script src=&quot;https://gist.github.com/3773348.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;JOIN&lt;/span&gt;&lt;/h5&gt;
&lt;script src=&quot;https://gist.github.com/3773349.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;GROUP&lt;/span&gt; BY&lt;/h5&gt;
&lt;script src=&quot;https://gist.github.com/3773351.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;TABLES&lt;/span&gt;&lt;/h5&gt;
&lt;script src=&quot;https://gist.github.com/3773353.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LINKS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;http://hadoop.apache.org/pig/docs/r0.6.0/piglatin_ref2.html&quot;&gt;Pig 0.6 manual&lt;/a&gt;&lt;/p&gt;</description>
				<pubDate>Sat, 27 Mar 2010 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/hadoop/2010-03-27-hadoop-pig-sql-documentation</link>
				<guid isPermaLink="true">http://riccomini.name/posts/hadoop/2010-03-27-hadoop-pig-sql-documentation</guid>
			</item>
		
			<item>
				<title>BlackBerry Storm GPS</title>
				<description>&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;BLACKBERRY&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;MAINSCREEN&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;BBTMainScreen is a main screen class that tracks a user&amp;#8217;s &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; location. The class sends updates every 10 seconds to LOCATION_URL. The most important (and most difficult) part to figure out is how to configure your Criteria and LocationListener. If these aren&amp;#8217;t configured properly, the Storm will disable its &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; listener temporarily.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Please copy the resetGPS() criteria/location listener settings &lt;span class=&quot;caps&quot;&gt;EXACTLY&lt;/span&gt; as they are shown.&lt;/strong&gt;&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3773117.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SIGNING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;YOUR&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;CODE&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;If you run the above code on your BlackBerry Storm, you will get a &amp;#8220;&lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; not allowed&amp;#8221; LocationProvider exception. You need to get your code signed if you want to use the BlackBerry Storm with &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; in your app. To do this, you need to buy a $20 certificate from &lt;span class=&quot;caps&quot;&gt;RIM&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;After you get your certificate, you need to sign your .cod file using &amp;#8220;Signature Tool&amp;#8221;. Before you do this, you need to change your .csi file. For some reason, BlackBerry does not properly configure the .csi file to include &lt;span class=&quot;caps&quot;&gt;ALL&lt;/span&gt; requirements. It took me a long time to figure this out. Your .csi file should look like this.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;33000000=RIMAPPSA2
52424200=RIM Blackberry Apps API
52434300=RIM Crypto API - Certicom
52434900=RIM Crypto API - Internal
52435200=RIM Crypto API - RIM
52525400=RIM Runtime API&lt;/code&gt;&lt;/pre&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;TESTING&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;After your code is signed, you can put it on to your BlackBerry, and run it. Running the code should show you your long/lat. If it gives you 0/0, or -1/-1 at first, wait for a minute or two. Resolving the &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; location can take a minute.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LINKS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;http://www.riccomini.name/Topics/Mobile/BlackBerry/BlackBerryStormGPS/&quot;&gt;My Last BlackBerry &lt;span class=&quot;caps&quot;&gt;GPS&lt;/span&gt; Post&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://supportforums.blackberry.com/rim/board/message?board.id=java_dev&amp;amp;thread.id=11845&amp;amp;view=by_date_ascending&amp;amp;page=1&quot;&gt;My BlackBerry Support Forum Post&lt;/a&gt;&lt;/p&gt;</description>
				<pubDate>Mon, 22 Mar 2010 00:00:00 -0700</pubDate>
				<link>http://riccomini.name/posts/blackberry/2010-03-22-blackberry-storm-gps</link>
				<guid isPermaLink="true">http://riccomini.name/posts/blackberry/2010-03-22-blackberry-storm-gps</guid>
			</item>
		
			<item>
				<title>Exploring the Twitter Stream</title>
				<description>&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;DATA&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;SIZE&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;747,349 tweets in ~10.5 hours for a total raw size of 925M.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;GEOLOCATION&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;DATA&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;1,723 geo tagged tweets out of 747,349 total tweets (0.23%).&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;URLS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;151,858 tweets with a url out of 747,349 total tweets (0.20%).&lt;/p&gt;
&lt;p&gt;By the way, an easy way to unshorten URLs is to use Python&amp;#8217;s urllib2.urlopen(url).geturl() command. Works like a charm, though I&amp;#8217;m not sure if it fetches the entire page. I hav e a sneaking suspicion that it does.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;POPULAR&lt;/span&gt; 2-&lt;span class=&quot;caps&quot;&gt;WORD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PAIRS&lt;/span&gt;&lt;/h5&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;th&gt;Phrase &lt;/th&gt;
		&lt;th&gt;Count &lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; on my &lt;/td&gt;
		&lt;td&gt; 2981 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to go &lt;/td&gt;
		&lt;td&gt; 3037 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; need to &lt;/td&gt;
		&lt;td&gt; 3074 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; ulive on &lt;/td&gt;
		&lt;td&gt; 3086 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; will be &lt;/td&gt;
		&lt;td&gt; 3111 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i can &lt;/td&gt;
		&lt;td&gt; 3112 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; have to &lt;/td&gt;
		&lt;td&gt; 3165 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; are you &lt;/td&gt;
		&lt;td&gt; 3179 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; but i &lt;/td&gt;
		&lt;td&gt; 3263 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; is the &lt;/td&gt;
		&lt;td&gt; 3311 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; paramoreinpoland paramoreinpoland &lt;/td&gt;
		&lt;td&gt; 3315 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; in a &lt;/td&gt;
		&lt;td&gt; 3344 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; want to &lt;/td&gt;
		&lt;td&gt; 3534 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i know &lt;/td&gt;
		&lt;td&gt; 3546 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; and i &lt;/td&gt;
		&lt;td&gt; 3570 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; is a &lt;/td&gt;
		&lt;td&gt; 3914 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; at the &lt;/td&gt;
		&lt;td&gt; 4153 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to get &lt;/td&gt;
		&lt;td&gt; 4223 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i was &lt;/td&gt;
		&lt;td&gt; 4246 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; for a &lt;/td&gt;
		&lt;td&gt; 4328 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; have a &lt;/td&gt;
		&lt;td&gt; 4340 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i think &lt;/td&gt;
		&lt;td&gt; 4400 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; if you &lt;/td&gt;
		&lt;td&gt; 4559 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i dont &lt;/td&gt;
		&lt;td&gt; 4897 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i am &lt;/td&gt;
		&lt;td&gt; 4905 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; going to &lt;/td&gt;
		&lt;td&gt; 5024 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i just &lt;/td&gt;
		&lt;td&gt; 5041 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i have &lt;/td&gt;
		&lt;td&gt; 5249 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to be &lt;/td&gt;
		&lt;td&gt; 5404 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i love &lt;/td&gt;
		&lt;td&gt; 6108 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to the &lt;/td&gt;
		&lt;td&gt; 6407 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; of the &lt;/td&gt;
		&lt;td&gt; 7754 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; for the &lt;/td&gt;
		&lt;td&gt; 7945 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; on the &lt;/td&gt;
		&lt;td&gt; 8325 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; in the &lt;/td&gt;
		&lt;td&gt; 10890 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;POPULAR&lt;/span&gt; 3-&lt;span class=&quot;caps&quot;&gt;WORD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PAIRS&lt;/span&gt;&lt;/h5&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;th&gt;Phrase &lt;/th&gt;
		&lt;th&gt;Count &lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i wish i &lt;/td&gt;
		&lt;td&gt; 534 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; haiti to 90999 &lt;/td&gt;
		&lt;td&gt; 548 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i feel like &lt;/td&gt;
		&lt;td&gt; 549 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i need a &lt;/td&gt;
		&lt;td&gt; 552 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to be a &lt;/td&gt;
		&lt;td&gt; 596 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; unew blog post &lt;/td&gt;
		&lt;td&gt; 618 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i favorited a &lt;/td&gt;
		&lt;td&gt; 637 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; favorited a youtube &lt;/td&gt;
		&lt;td&gt; 637 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; going to be &lt;/td&gt;
		&lt;td&gt; 640 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; meu resultado foi &lt;/td&gt;
		&lt;td&gt; 647 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; e meu resultado &lt;/td&gt;
		&lt;td&gt; 647 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; acabo de completar &lt;/td&gt;
		&lt;td&gt; 649 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i just took &lt;/td&gt;
		&lt;td&gt; 651 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; uvote too \u2794 &lt;/td&gt;
		&lt;td&gt; 673 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; video chat with &lt;/td&gt;
		&lt;td&gt; 693 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; other people at &lt;/td&gt;
		&lt;td&gt; 693 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; cant wait to &lt;/td&gt;
		&lt;td&gt; 707 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; check it out &lt;/td&gt;
		&lt;td&gt; 717 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; joined a video &lt;/td&gt;
		&lt;td&gt; 720 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a video chat &lt;/td&gt;
		&lt;td&gt; 720 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i think i &lt;/td&gt;
		&lt;td&gt; 724 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; just joined a &lt;/td&gt;
		&lt;td&gt; 729 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to go to &lt;/td&gt;
		&lt;td&gt; 741 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; one of the &lt;/td&gt;
		&lt;td&gt; 764 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a lot of &lt;/td&gt;
		&lt;td&gt; 786 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; for the ff &lt;/td&gt;
		&lt;td&gt; 821 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i dont know &lt;/td&gt;
		&lt;td&gt; 836 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i have to &lt;/td&gt;
		&lt;td&gt; 851 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; im going to &lt;/td&gt;
		&lt;td&gt; 875 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i have a &lt;/td&gt;
		&lt;td&gt; 912 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; pants on the &lt;/td&gt;
		&lt;td&gt; 966 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i need to &lt;/td&gt;
		&lt;td&gt; 1018 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; on the ground &lt;/td&gt;
		&lt;td&gt; 1059 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i want to &lt;/td&gt;
		&lt;td&gt; 1066 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; aka aka aka &lt;/td&gt;
		&lt;td&gt; 1147 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a youtube video &lt;/td&gt;
		&lt;td&gt; 1180 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i love you &lt;/td&gt;
		&lt;td&gt; 1216 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; thanks for the &lt;/td&gt;
		&lt;td&gt; 1635 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; paramoreinpoland paramoreinpoland paramoreinpoland &lt;/td&gt;
		&lt;td&gt; 2745 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;POPULAR&lt;/span&gt; 4-&lt;span class=&quot;caps&quot;&gt;WORD&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PAIRS&lt;/span&gt;&lt;/h5&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;th&gt;Phrase &lt;/th&gt;
		&lt;th&gt;Count &lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 5 out of 5 &lt;/td&gt;
		&lt;td&gt; 202 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a youtube video 5 &lt;/td&gt;
		&lt;td&gt; 202 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; what do you think &lt;/td&gt;
		&lt;td&gt; 216 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to donate 10 to &lt;/td&gt;
		&lt;td&gt; 219 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 90999 to donate 10 &lt;/td&gt;
		&lt;td&gt; 225 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; the people of haiti &lt;/td&gt;
		&lt;td&gt; 225 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to the red cross &lt;/td&gt;
		&lt;td&gt; 229 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i rated a youtube &lt;/td&gt;
		&lt;td&gt; 234 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; rated a youtube video &lt;/td&gt;
		&lt;td&gt; 234 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; thank you for the &lt;/td&gt;
		&lt;td&gt; 236 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; uacabo de completar qual &lt;/td&gt;
		&lt;td&gt; 237 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; out of 5 stars &lt;/td&gt;
		&lt;td&gt; 240 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i just took what &lt;/td&gt;
		&lt;td&gt; 253 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; cant wait to see &lt;/td&gt;
		&lt;td&gt; 258 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a twibbon to your &lt;/td&gt;
		&lt;td&gt; 266 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to your avatar now &lt;/td&gt;
		&lt;td&gt; 266 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; twibbon to your avatar &lt;/td&gt;
		&lt;td&gt; 266 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; add a twibbon to &lt;/td&gt;
		&lt;td&gt; 267 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; nowplaying nowplaying nowplaying nowplaying &lt;/td&gt;
		&lt;td&gt; 273 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; to 90999 to donate &lt;/td&gt;
		&lt;td&gt; 273 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; on my way to &lt;/td&gt;
		&lt;td&gt; 274 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; check this video out &lt;/td&gt;
		&lt;td&gt; 284 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; haiti to 90999 to &lt;/td&gt;
		&lt;td&gt; 287 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i uploaded a youtube &lt;/td&gt;
		&lt;td&gt; 302 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; uploaded a youtube video &lt;/td&gt;
		&lt;td&gt; 303 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; text haiti to 90999 &lt;/td&gt;
		&lt;td&gt; 366 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a shorty award in &lt;/td&gt;
		&lt;td&gt; 423 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; for a shorty award &lt;/td&gt;
		&lt;td&gt; 431 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; thanks for the ff &lt;/td&gt;
		&lt;td&gt; 533 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; favorited a youtube video &lt;/td&gt;
		&lt;td&gt; 637 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; i favorited a youtube &lt;/td&gt;
		&lt;td&gt; 637 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; e meu resultado foi &lt;/td&gt;
		&lt;td&gt; 647 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; a video chat with &lt;/td&gt;
		&lt;td&gt; 691 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; just joined a video &lt;/td&gt;
		&lt;td&gt; 720 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; joined a video chat &lt;/td&gt;
		&lt;td&gt; 720 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; pants on the ground &lt;/td&gt;
		&lt;td&gt; 873 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; aka aka aka aka &lt;/td&gt;
		&lt;td&gt; 1049 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; paramoreinpoland paramoreinpoland paramoreinpoland paramoreinpoland &lt;/td&gt;
		&lt;td&gt; 2182 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;WORDS&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PER&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TWEET&lt;/span&gt;&lt;/h5&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;th&gt;Number of Words &lt;/th&gt;
		&lt;th&gt;Count &lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 0 &lt;/td&gt;
		&lt;td&gt; 33504 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 1 &lt;/td&gt;
		&lt;td&gt; 30815 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 2 &lt;/td&gt;
		&lt;td&gt; 39865 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 3 &lt;/td&gt;
		&lt;td&gt; 35435 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 4 &lt;/td&gt;
		&lt;td&gt; 36727 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 5 &lt;/td&gt;
		&lt;td&gt; 38331 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 6 &lt;/td&gt;
		&lt;td&gt; 38839 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 7 &lt;/td&gt;
		&lt;td&gt; 38550 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 8 &lt;/td&gt;
		&lt;td&gt; 37510 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 9 &lt;/td&gt;
		&lt;td&gt; 35866 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 10 &lt;/td&gt;
		&lt;td&gt; 34127 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 11 &lt;/td&gt;
		&lt;td&gt; 32280 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 12 &lt;/td&gt;
		&lt;td&gt; 31443 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 13 &lt;/td&gt;
		&lt;td&gt; 28307 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 14 &lt;/td&gt;
		&lt;td&gt; 26469 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 15 &lt;/td&gt;
		&lt;td&gt; 25015 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 16 &lt;/td&gt;
		&lt;td&gt; 23747 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 17 &lt;/td&gt;
		&lt;td&gt; 23304 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 18 &lt;/td&gt;
		&lt;td&gt; 22619 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 19 &lt;/td&gt;
		&lt;td&gt; 21676 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 20 &lt;/td&gt;
		&lt;td&gt; 20552 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 21 &lt;/td&gt;
		&lt;td&gt; 19002 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 22 &lt;/td&gt;
		&lt;td&gt; 17018 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 23 &lt;/td&gt;
		&lt;td&gt; 14555 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 24 &lt;/td&gt;
		&lt;td&gt; 12241 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 25 &lt;/td&gt;
		&lt;td&gt; 10194 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 26 &lt;/td&gt;
		&lt;td&gt; 7494 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 27 &lt;/td&gt;
		&lt;td&gt; 5094 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 28 &lt;/td&gt;
		&lt;td&gt; 3213 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 29 &lt;/td&gt;
		&lt;td&gt; 1761 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 30 &lt;/td&gt;
		&lt;td&gt; 951 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 31 &lt;/td&gt;
		&lt;td&gt; 455 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 32 &lt;/td&gt;
		&lt;td&gt; 205 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 33 &lt;/td&gt;
		&lt;td&gt; 97 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 34 &lt;/td&gt;
		&lt;td&gt; 32 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 35 &lt;/td&gt;
		&lt;td&gt; 19 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 36 &lt;/td&gt;
		&lt;td&gt; 18 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 37 &lt;/td&gt;
		&lt;td&gt; 8 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 38 &lt;/td&gt;
		&lt;td&gt; 8 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 39 &lt;/td&gt;
		&lt;td&gt; 1 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; 51 &lt;/td&gt;
		&lt;td&gt; 1 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;POPULAR&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;HASH&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;TAGS&lt;/span&gt;&lt;/h5&gt;
&lt;table&gt;
	&lt;tr&gt;
		&lt;th&gt;Hash &lt;/th&gt;
		&lt;th&gt;Count &lt;/th&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #wwfm &lt;/td&gt;
		&lt;td&gt; 240 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #helphaiti &lt;/td&gt;
		&lt;td&gt; 249 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #jerseyshore &lt;/td&gt;
		&lt;td&gt; 251 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #bbb10 &lt;/td&gt;
		&lt;td&gt; 266 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #twibbon &lt;/td&gt;
		&lt;td&gt; 268 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #deleteyouraccount &lt;/td&gt;
		&lt;td&gt; 270 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #quote &lt;/td&gt;
		&lt;td&gt; 274 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #tweetmyjobs &lt;/td&gt;
		&lt;td&gt; 282 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #bbb &lt;/td&gt;
		&lt;td&gt; 295 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #epicpetwars &lt;/td&gt;
		&lt;td&gt; 300 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #news &lt;/td&gt;
		&lt;td&gt; 315 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #masen &lt;/td&gt;
		&lt;td&gt; 315 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #1 &lt;/td&gt;
		&lt;td&gt; 332 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #twitterpelis &lt;/td&gt;
		&lt;td&gt; 376 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #shoutout &lt;/td&gt;
		&lt;td&gt; 377 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #follow &lt;/td&gt;
		&lt;td&gt; 381 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #venezuela &lt;/td&gt;
		&lt;td&gt; 403 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #cbb7 &lt;/td&gt;
		&lt;td&gt; 428 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #fail &lt;/td&gt;
		&lt;td&gt; 461 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #sega &lt;/td&gt;
		&lt;td&gt; 473 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #endondeestas &lt;/td&gt;
		&lt;td&gt; 527 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #patdinlatinamerica &lt;/td&gt;
		&lt;td&gt; 546 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #ifyoucheatonme &lt;/td&gt;
		&lt;td&gt; 563 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #tcot &lt;/td&gt;
		&lt;td&gt; 673 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #omgfacts &lt;/td&gt;
		&lt;td&gt; 712 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #iwouldhatetobeyou &lt;/td&gt;
		&lt;td&gt; 744 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #supportdannymcfly &lt;/td&gt;
		&lt;td&gt; 859 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #supportdannyjones &lt;/td&gt;
		&lt;td&gt; 862 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #fb &lt;/td&gt;
		&lt;td&gt; 1052 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #jobs &lt;/td&gt;
		&lt;td&gt; 1141 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #followfriday &lt;/td&gt;
		&lt;td&gt; 1801 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #aka &lt;/td&gt;
		&lt;td&gt; 1882 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #waystoannoypeople &lt;/td&gt;
		&lt;td&gt; 2072 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #haiti &lt;/td&gt;
		&lt;td&gt; 2148 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #nowplaying &lt;/td&gt;
		&lt;td&gt; 3479 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #paramoreinpoland &lt;/td&gt;
		&lt;td&gt; 3915 &lt;/td&gt;
	&lt;/tr&gt;
	&lt;tr&gt;
		&lt;td&gt; #ff &lt;/td&gt;
		&lt;td&gt; 11354 &lt;/td&gt;
	&lt;/tr&gt;
&lt;/table&gt;
&lt;h5&gt;TF-&lt;span class=&quot;caps&quot;&gt;IDF&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;The first step in determining related tweets for me was to simply determine what topics I was interested in. I initially applied TF-&lt;span class=&quot;caps&quot;&gt;IDF&lt;/span&gt; to my tweet stream to determine the most important keywords. This turned out to work fairly well. I got keywords such as Hadoop, Pig, AsterData, etc. I also got a few names of people that I had retweeted. In addition I got some stop words (interesting, bit, etc). I removed some of the stop words, and filtered out the names, and the resulting list was fairly decent.&lt;/p&gt;
&lt;p&gt;I then iterated over ever tweet in the twitter stream, and computed the cosine similarity between the tweet, and my feed. This failed miserably. The top tweets for me were one word tweets such as &amp;#8220;PIg___&amp;#8221;, &amp;#8220;data&amp;#8221;, etc. Unsurprisingly, cosine similarity just doesn&amp;#8217;t hold up well for small documents, such as tweets.&lt;/p&gt;
&lt;p&gt;This is as far as I&amp;#8217;ve gotten, since I had to head back into work, but I have a few more tricks to try. Ideas are always welcome.&lt;/p&gt;</description>
				<pubDate>Tue, 19 Jan 2010 00:00:00 -0800</pubDate>
				<link>http://riccomini.name/posts/social/2010-01-19-exploring-twitter-stream</link>
				<guid isPermaLink="true">http://riccomini.name/posts/social/2010-01-19-exploring-twitter-stream</guid>
			</item>
		
			<item>
				<title>Google App Engine and Facebook Connect</title>
				<description>&lt;p&gt;If you want to jump straight to the source code, download &lt;a href=&quot;/files/app-engine-facebook-connect/google_app_engine_facebook_connect_python.zip&quot;&gt;google_app_engine_facebook_connect_python.zip&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SETUP&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;GOOGLE&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;To get started, you need to make sure you have signed up for Google App Engine, downloaded the &lt;span class=&quot;caps&quot;&gt;SDK&lt;/span&gt;, and added an application to your account. The Google App Engine Launcher is a great way to develop for app engine. It&amp;#8217;s a convenient tool that allows you to test locally, and deploy to your app engine appspot quickly. For the purpose of our tutorial, we&amp;#8217;ll refer to the Facebook Connect app engine project as gae-facebook-connect.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SETUP&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;FACEBOOK&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;After setting up your Google App Engine account, you&amp;#8217;ll need to create a &lt;a href=&quot;http://developers.facebook.com/setup.php&quot;&gt;Facebook Application&lt;/a&gt;. Don&amp;#8217;t worry too much about step 2 (the xd_receiver.html step), as I&amp;#8217;ve included an xd_receiver.html file in the &lt;a href=&quot;/files/app-engine-facebook-connect/google_app_engine_facebook_connect_python.zip&quot;&gt;tutorial zip&lt;/a&gt; at the end of this tutorial. Once we&amp;#8217;re set up, we need to setup the Facebook Connect &lt;span class=&quot;caps&quot;&gt;URL&lt;/span&gt; for our app engine.&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;/img/app-engine-facebook-connect/facebook-connect.png&quot;&gt;&lt;img src=&quot;/img/app-engine-facebook-connect/facebook-connect.png&quot; style=&quot;width:100%;&quot; alt=&quot;&quot; /&gt;&lt;/a&gt;&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;INSTALL&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;PYFACEBOOK&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Now that we have both Google App Engine and Facebook Connect setup, let&amp;#8217;s configure Facebook&amp;#8217;s Python library (appropriately named &lt;a href=&quot;http://wiki.developers.facebook.com/index.php/PyFacebook_Tutorial&quot;&gt;PyFacebook&lt;/a&gt;). In order to use PyFacebook with Google App Engine, you need to make a modification to the &lt;i&gt;init&lt;/i&gt;.py file in PyFacebook&amp;#8217;s facebook directory. Add the following code to the Facebook class in &lt;i&gt;init&lt;/i&gt;.py.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3775967.js&quot;&gt; &lt;/script&gt;&lt;p&gt;This trick is documented on the &lt;a href=&quot;http://forum.developers.facebook.com/viewtopic.php?pid=164613&quot;&gt;Facebook developer forums&lt;/a&gt;. For convenience, you can copy &lt;i&gt;init&lt;/i&gt;.py into the root directory of your app engine project (where your main.py is), and call it facebook.py. This is not required, but it&amp;#8217;s the structure of the &lt;a href=&quot;/files/app-engine-facebook-connect/google_app_engine_facebook_connect_python.zip&quot;&gt;tutorial zip&lt;/a&gt;.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;WRITE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;APP&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Now that we&amp;#8217;ve got the PyFacebook library configured properly, all that&amp;#8217;s left to do is write our Facebook Connect login app. First, make your app.yaml read like so.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;application: gae-facebook-connect
version: 1
runtime: python
api_version: 1&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;handlers:
- url: /static
  static_dir: static&lt;/code&gt;&lt;/pre&gt;
&lt;pre&gt;&lt;code&gt;- url: /.*
  script: main.py&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;The static directory is where any images, css, js, etc goes. In our case, this is where the xd_receiver.html will sit. The application value should be whatever your application is called on Google App Engine.&lt;/p&gt;
&lt;p&gt;Next, we need to write main.py to.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3775970.js&quot;&gt; &lt;/script&gt;&lt;p&gt;There is a lot of boilerplate here, but the basic functionality is that MainHandler takes all requests to the root domain. The get() function is called, which is in the BaseHandler. The BaseHandler will check to see if the user is logged in. If the user is logged in, BaseHandler will call get_secure() in MainHandler, which will print the index.html template. If the user is not logged in, BaseHandler will print the login.html template.&lt;/p&gt;
&lt;p&gt;Let&amp;#8217;s look at login.html.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3775976.js&quot;&gt; &lt;/script&gt;&lt;p&gt;And now index.html.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3775978.js&quot;&gt; &lt;/script&gt;&lt;p&gt;It should be fairly obvious what these two html files are doing. If you don&amp;#8217;t know what &lt;span class=&quot;caps&quot;&gt;XFBML&lt;/span&gt; is, read here.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;CONCLUSION&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;That&amp;#8217;s all! Just deploy your app, and you should be able to log in and out of your Facebook Connect Google App Engine app.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LINKS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;/files/app-engine-facebook-connect/google_app_engine_facebook_connect_python.zip&quot;&gt;google_app_engine_facebook_connect_python.zip&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://code.google.com/appengine/&quot;&gt;Google App Engine&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://developers.facebook.com/tools.php&quot;&gt;Facebook Developer Tools&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.developers.facebook.com/index.php/XFBML&quot;&gt;Facebook &lt;span class=&quot;caps&quot;&gt;XFBML&lt;/span&gt;&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://developers.facebook.com/setup.php&quot;&gt;Facebook Application Setup&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://wiki.developers.facebook.com/index.php/PyFacebook_Tutorial&quot;&gt;PyFacebook&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://forum.developers.facebook.com/viewtopic.php?pid=164613&quot;&gt;PyFacebook App Engine Patch&lt;/a&gt;&lt;/p&gt;</description>
				<pubDate>Thu, 26 Nov 2009 00:00:00 -0800</pubDate>
				<link>http://riccomini.name/posts/python/2009-11-26-app-engine-facebook-connect</link>
				<guid isPermaLink="true">http://riccomini.name/posts/python/2009-11-26-app-engine-facebook-connect</guid>
			</item>
		
			<item>
				<title>Sorting Reducer Input Values in Hadoop</title>
				<description>&lt;p&gt;I &lt;span class=&quot;caps&quot;&gt;HIGHLY&lt;/span&gt; recommend that you read the email thread by &lt;a href=&quot;http://markmail.org/message/7gonm3kiasyh2xnf#query:setOutputKeyComparatorClass+page:3+mid:esn3lgzyx3ag26cy+state:results&quot;&gt;Owen O&amp;#8217;Malley&lt;/a&gt; that describes this technique in brief. I should also note that this example is using the 0.18 Hadoop &lt;span class=&quot;caps&quot;&gt;API&lt;/span&gt;.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;PROBLEM&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;STATEMENT&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Suppose we have a file with a bunch of comma/line separated letters:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;l,f,a,e,a,a,l
f,g,b,c,b,d,f
x,i,t,u,f,e,h
...etc&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We want our reducer to receive bigrams (lf, fa, ae, ea, aa, al, etc), but partitioned by the first letter, and sorted (ascending) by the second. For example, for the letter a, the reducer should receive:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;a, [l,e,a]&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;This is actually somewhat difficult to do, since we want to partition by key, but sort the reducer&amp;#8217;s values iterator. The trick is to have the mapper output the bigram in the key, and only the second letter in the value. For the example above, the mapper would emit:&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;&amp;lt;ae, e&amp;gt;
&amp;lt;aa, a&amp;gt;
&amp;lt;al, l&amp;gt;
...&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;We can then use a custom partitioner/sorter to partition and sort according to our needs.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;SORTING&lt;/span&gt; BY &lt;span class=&quot;caps&quot;&gt;VALUE&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;To sort Hadoop&amp;#8217;s mapper output by value, you need to set three settings in your JobConf:&lt;/p&gt;
&lt;ul&gt;
	&lt;li&gt;setPartitionerClass&lt;/li&gt;
	&lt;li&gt;setOutputValueGroupingComparator&lt;/li&gt;
	&lt;li&gt;setOutputKeyComparatorClass&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There are many threads that say that you can&amp;#8217;t sort by value in Hadoop. This is true. What you can do, instead, is have your mapper output all data in the key, rather than the value. Then you can use a specialized Partitioner classes and two RawComparator classes to sort and partition your map output properly.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;PARTITIONER&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;The first class that you need to set is a class that extends org.apache.hadoop.mapred.Partitioner. This class has a single function that determines which partition your map output should go to. This means that you can&amp;#8217;t go below 0, or above numPartitions &amp;#8211; 1. Mostly, you&amp;#8217;ll want to hashCode() some portion of your key and mod it by numPartitions.&lt;/p&gt;
&lt;p&gt;In our example, the partitioner will partition by the first letter of the key.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;OUTPUT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;VALUE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;GROUPING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;COMPARATOR&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;The OutputValueGroupingComparator JobConf setting takes in a org.apache.hadoop.io.RawComparator. This RawComparator is used to determine which reducer the mapper output row should go to. This RawComparator does not sort a reducer&amp;#8217;s value iterator. Instead, it&amp;#8217;s used to sort reducer input, so that the reducer knows when a new grouping starts.&lt;/p&gt;
&lt;p&gt;In our example, the value grouping comparator will sort by the first letter of the key.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;OUTPUT&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;KEY&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;COMPARATOR&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;The OutputKeyComparatorClass JobConf setting also takes in a org.apache.hadoop.io.RawComparator. This RawComparator is used to sort the values iterator that the reducer gets, which is what we want. It should be noted, that although the RawComparator is used to sort the values iterator, the data that gets passed into the comparator is the mapper key output. This is the reason that we must put all data in the key as well as the value.&lt;/p&gt;
&lt;p&gt;A &lt;strong&gt;very&lt;/strong&gt; important thing to note is that they key compartor must also enforce the value grouping comparator&amp;#8217;s rules. In our example, this means that it must first check if the first letter is equal. If it&amp;#8217;s not equal, it should return the same ruls as the value comparator. Only if the first letter of the key is equal should we apply our value-level sorting (comparing the second letter). If you do not do this, you will break your grouping.&lt;/p&gt;
&lt;p&gt;In our example, the key comparator will sort by the second letter of the key.&lt;/p&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;RUNNING&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;THE&lt;/span&gt; &lt;span class=&quot;caps&quot;&gt;JOB&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;Now, all we need to do is run the job.&lt;/p&gt;
&lt;script src=&quot;https://gist.github.com/3775858.js&quot;&gt; &lt;/script&gt;&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;OUTPUT&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;As you can see, the reducer input is grouped by the first letter (our logical key), and the values are sorted ascending.&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;AY: YWUTSSSRRQPPPPOMMKJIIIFB
BZ: ZYYXXXWVUUURRRRQPPPPPPOONMMLLKJHGEEDDBB
CZ: ZZZZZYYXXWVUUUTSSSRQQOOMKKKHHHGGFFDDCCCBB
DY: YXWWSSQQPPPONMMKIHGEDDCCBB
EW: WVUTRRRQPOOOOONMLLKKKJJHFEEDDCCBA
FY: YXXXWVVVUUTSSRPNNNLLKJHGFFECBBBBA
GZ: ZZYXVTSQQPOONLJIHHHFFCCCBBA
HZ: ZYYYYXWVUUTTTRQQPOOMKJJIIIGFEDAAAA
IY: YYYXWWVVVUTTSRRRQMKJJJIIIHGGFFEEEECBBBA
JZ: ZZYYXXWRRRQPPOOOMLJJIIHHHHCCCBBA
KZ: ZZYXWWVSSSSRQONMJIIHFEDB
LZ: ZZZYYXXWUTRQQQPLKJIIIHHGGFDDCCCBBBAA
MZ: ZZYYYWTTTSSQQQQOJIIIHGGFCCCBBAA
NZ: ZZYYXVVUTSSSSRQPNMKIHGFFFECAA
OZ: ZZZYYXWWUSRRPPOONNNMMLJIIHHHGGFEEEDDCCBA
PZ: ZXXWWTSSSSSRRRQQQMMLLLKJIIIHEEDCBA
QZ: ZZYXWWWWWWVVVUTTSSSSRRRRQQQPOOONMLKJIHHFDD
RY: YYYXXXWVUURRQQPPOOOLLLLLLKJJJJHHHHGFFEEEDDCCCBAA
SY: YXWWWVVVUUUTTSRRRQQQNNNMLJHHHGGGGFEDDCCCBB
TZ: ZZYYYYXXWVTTTTSRRQPPONNNNMMLLJIIIICBB
UZ: ZZZYXWWVVVSRRRQPPONMHHGEDCBBA
VZ: ZYWVVUTTTQPPPOOMKIIGFEEDDCCCBB
WX: XWWWVUTTSSSRRPNNNMMLLKKKKKJJIGEDAAAA
XZ: ZZYXXXXSSRRQQOOMLLKKJIIIIHGFFEDDBA
YZ: ZZZYXWWVUUUTTTSSRQPPPOONNNMLJIIFFFFEDCCCAA
ZZ: ZYYWVVUUTSSSSRRQQQPOONMMLLLJJIIGFDBBBA&lt;/code&gt;&lt;/pre&gt;
&lt;h5&gt;&lt;span class=&quot;caps&quot;&gt;LINKS&lt;/span&gt;&lt;/h5&gt;
&lt;p&gt;&lt;a href=&quot;http://markmail.org/message/7gonm3kiasyh2xnf#query:setOutputKeyComparatorClass+page:3+mid:esn3lgzyx3ag26cy+state:results&quot;&gt;Owen O&amp;#8217;Malley&amp;#8217;s Value Sorting Email&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;http://issues.apache.org/jira/secure/attachment/12356648/485.patch&quot;&gt;Hadoop Value Grouping Example Patch&lt;/a&gt;&lt;br /&gt;
&lt;a href=&quot;https://issues.apache.org/jira/browse/HADOOP-4545&quot;&gt;Secondary Sort Hadoop Example&lt;/a&gt;&lt;/p&gt;</description>
				<pubDate>Fri, 13 Nov 2009 00:00:00 -0800</pubDate>
				<link>http://riccomini.name/posts/hadoop/2009-11-13-sort-reducer-input-value-hadoop</link>
				<guid isPermaLink="true">http://riccomini.name/posts/hadoop/2009-11-13-sort-reducer-input-value-hadoop</guid>
			</item>
		
	</channel>
</rss>